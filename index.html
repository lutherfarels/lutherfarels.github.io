<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Traffic Lab – Analisis Keramaian Lalu Lintas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- TomTom -->
  <link rel="stylesheet" href="https://api.tomtom.com/maps-sdk-for-web/cdn/6.x/6.25.0/maps/maps.css">
  <script src="https://api.tomtom.com/maps-sdk-for-web/cdn/6.x/6.25.0/maps/maps-web.min.js"></script>
  <script src="https://api.tomtom.com/maps-sdk-for-web/cdn/6.x/6.25.0/services/services-web.min.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ====== TAMPILAN AWAL / MENU ====== -->
<section id="landing">
  <!-- Bar logo -->
  <div class="landing-bar">
    <div class="landing-logo">Traffic <span>Lab</span></div>
  </div>

  <div class="landing-main">
    <!-- header: tagline + judul -->
    <div class="landing-header">
      <div class="landing-tagline">
        MINI RISET KALKULUS • KEPADATAN LALU LINTAS
      </div>
      <div class="landing-title-box">
        <h1>Selamat datang di <span>Traffic Lab</span></h1>
      </div>
    </div>

    <!-- deskripsi -->
    <div class="landing-desc-box">
      <p>
        Website ini membantu menganalisis kepadatan lalu lintas berdasarkan
        data <b>TomTom Traffic</b> dan konsep <b>turunan numerik</b>.
        Kamu bisa melihat kondisi jalan secara real-time dan menggunakannya
        sebagai bahan mini riset.
      </p>
    </div>

    <!-- tombol menu 4 kotak -->
    <div class="landing-buttons">
      <button id="btn-fitur" class="menu-btn">Fitur</button>
      <button id="btn-tutorial" class="menu-btn">Tutorial</button>
      <button id="btn-konsep" class="menu-btn">Konsep Turunan</button>
      <button id="btn-analisis" class="menu-btn">Analisis</button>
    </div>
  </div>
</section>

<!-- ====== HALAMAN KONTEN (HANYA SATU YANG TAMPIL, LANDING HILANG) ====== -->
<div id="pages" class="hidden">
  <header class="page-bar">
    <div class="landing-logo">Traffic <span>Lab</span></div>
    <button id="btn-home" class="btn-home">Kembali ke tampilan awal</button>
  </header>

  <main id="content">
    <!-- FITUR -->
    <section id="sec-fitur" class="content-section hidden">
      <h2>Fitur Utama Traffic Lab</h2>
      <div class="grid">
        <div class="card">
          <h3>Peta Interaktif</h3>
          <p>Pilih titik jalan di peta atau cari lokasi berdasarkan nama tempat/jalan.</p>
        </div>
        <div class="card">
          <h3>Status Kepadatan Berwarna</h3>
          <p>Hijau (lancar), kuning (padat), merah (macet) untuk interpretasi cepat.</p>
        </div>
        <div class="card">
          <h3>Turunan Kecepatan</h3>
          <p>Turunan numerik dv/dt menunjukkan arah perubahan kondisi lalu lintas.</p>
        </div>
        <div class="card">
          <h3>Riwayat & Grafik</h3>
          <p>Pengamatan disimpan dalam tabel dan grafik sebagai pendekatan fungsi v(t).</p>
        </div>
        <div class="card">
          <h3>Tracking Lokasi Saat Ini</h3>
          <p>Gunakan tombol “Lokasi Saya” untuk fokus pada posisimu sekarang.</p>
        </div>
        <div class="card">
          <h3>Ekspor Data</h3>
          <p>Unduh data dalam format CSV untuk keperluan laporan mini riset.</p>
        </div>
      </div>
    </section>

    <!-- TUTORIAL -->
    <section id="sec-tutorial" class="content-section hidden">
      <h2>Tutorial Pemakaian</h2>
      <ol class="steps">
        <li>Pilih menu <b>Analisis</b> pada tampilan awal.</li>
        <li>Pilih lokasi dengan:
          <ul>
            <li>Mengetik nama tempat/jalan dan klik salah satu hasil, atau</li>
            <li>Langsung klik titik di peta.</li>
          </ul>
        </li>
        <li>Atau tekan <b>Lokasi Saya</b> untuk memakai posisimu sekarang.</li>
        <li>Sistem otomatis mengambil data kecepatan berkala dan menghitung turunan dv/dt.</li>
        <li>Lihat status kepadatan, grafik kecepatan, dan unduh CSV untuk laporan.</li>
      </ol>
    </section>

    <!-- KONSEP TURUNAN -->
    <section id="sec-konsep" class="content-section hidden">
      <h2>Konsep Turunan dalam Analisis Keramaian</h2>
      <div class="two-cols">
        <div>
          <h3>1. Rasio Kecepatan (Intensitas Saat Ini)</h3>
          <p>
            Tingkat keramaian dasar ditentukan dari perbandingan kecepatan saat ini
            <code>v</code> dan kecepatan bebas <code>v<sub>free</sub></code>:
          </p>
          <div class="formula">
            <span>R = </span>
            <span class="frac">
              <span class="top">v</span>
              <span class="bottom">v<sub>free</sub></span>
            </span>
          </div>

          <p>Keterangan variabel:</p>
          <ul>
            <li><b>R</b> : rasio kecepatan (tanpa satuan)</li>
            <li><b>v</b> : kecepatan saat ini (km/jam)</li>
            <li><b>v<sub>free</sub></b> : kecepatan bebas, yaitu kecepatan saat jalan sangat lancar (km/jam)</li>
          </ul>

          <p>Klasifikasi:</p>
          <ul>
            <li>R ≥ 0,8 → <span class="pill pill-green">LANCAR</span></li>
            <li>0,5 ≤ R &lt; 0,8 → <span class="pill pill-yellow">PADAT</span></li>
            <li>R &lt; 0,5 → <span class="pill pill-red">MACET</span></li>
          </ul>
        </div>

        <div>
          <h3>2. Turunan Numerik Kecepatan</h3>
          <p>Perubahan kecepatan terhadap waktu di titik yang sama dihampiri dengan:</p>

          <div class="formula">
            <span>v′(t) ≈ </span>
            <span class="frac">
              <span class="top">v₂ − v₁</span>
              <span class="bottom">Δt</span>
            </span>
          </div>

          <p>Keterangan variabel:</p>
          <ul>
            <li><b>v₁</b> : kecepatan pada waktu pengamatan pertama (km/jam)</li>
            <li><b>v₂</b> : kecepatan pada waktu pengamatan kedua (km/jam)</li>
            <li><b>Δt</b> : selisih waktu pengamatan (menit)</li>
            <li><b>v′(t)</b> : turunan kecepatan (perubahan kecepatan per menit)</li>
          </ul>

          <p>Interpretasi sederhana:</p>
          <ul>
            <li>v′(t) &lt; 0 → kemacetan cenderung meningkat</li>
            <li>v′(t) ≈ 0 → kondisi relatif stabil</li>
            <li>v′(t) &gt; 0 → lalu lintas cenderung membaik</li>
          </ul>

          <p>
            Grafik kecepatan v(t) di menu Analisis dapat dianggap sebagai
            pendekatan fungsi, sedangkan v′(t) (dv/dt) berkaitan dengan
            kemiringan grafik tersebut.
          </p>
        </div>
      </div>
    </section>

    <!-- ANALISIS (PETA + GRAFIK) -->
    <section id="sec-analisis" class="content-section hidden">
      <h2>Analisis Keramaian Lalu Lintas</h2>
      <p class="section-sub">
        Pilih titik di peta, gunakan fitur pencarian, atau klik tombol
        <b>Lokasi Saya</b>. Sistem akan membaca data kecepatan dari TomTom
        Traffic dan menghitung turunan dv/dt.
      </p>

      <div class="app">
        <aside class="panel-dark">
          <div class="box-dark">
            <h3>Cari Lokasi</h3>
            <div class="search">
              <input id="search-input" placeholder="UNIMED, Plaza Medan Fair..." />
              <button id="search-btn" class="btn small">Cari</button>
            </div>
            <button id="loc-btn" class="btn small ghost">Gunakan Lokasi Saya</button>
            <p id="search-status" class="muted"></p>

            <div class="search-results-box">
              <ul id="search-results"></ul>
            </div>
          </div>

          <div class="box-dark">
            <h3>Status Kepadatan</h3>
            <span id="status" class="badge">-</span>
            <pre id="details"></pre>
          </div>

          <div class="box-dark">
            <h3>Riwayat Pengamatan</h3>
            <div class="table-wrap">
              <table>
                <thead>
                  <tr>
                    <th>#</th><th>Waktu</th><th>v</th><th>Status</th><th>dv/dt</th>
                  </tr>
                </thead>
                <tbody id="history-table"></tbody>
              </table>
            </div>
            <button id="download-btn" class="btn small">Unduh CSV</button>
          </div>
        </aside>

        <main class="main">
          <div id="map"></div>
          <div class="chart-box box-dark">
            <h3>Grafik Kecepatan (v(t))</h3>
            <canvas id="speed-chart"></canvas>
          </div>
        </main>
      </div>
    </section>
  </main>

  <footer class="footer">
    <p>© 2025 Traffic Lab – Mini riset analisis keramaian berbasis turunan.</p>
  </footer>
</div>

<script src="script.js"></script>
</body>
</html>
